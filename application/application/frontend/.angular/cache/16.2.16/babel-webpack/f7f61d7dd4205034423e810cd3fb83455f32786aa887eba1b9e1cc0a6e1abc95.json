{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/employer.service\";\nimport * as i3 from \"@angular/common\";\nfunction EmployerPostingsComponent_button_28_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r5 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_button_28_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r5);\n      const ctx_r4 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r4.cancelEdit());\n    });\n    i0.ɵɵtext(1, \"Cancel\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction EmployerPostingsComponent_p_29_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 26);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(ctx_r1.message);\n  }\n}\nfunction EmployerPostingsComponent_div_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 27)(1, \"div\")(2, \"h3\");\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 28)(7, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_div_31_Template_button_click_7_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const job_r6 = restoredCtx.$implicit;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.edit(job_r6));\n    });\n    i0.ɵɵtext(8, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_div_31_Template_button_click_9_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const job_r6 = restoredCtx.$implicit;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.changeStatus(job_r6, \"CLOSED\"));\n    });\n    i0.ɵɵtext(10, \"Close\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(11, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_div_31_Template_button_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const job_r6 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.changeStatus(job_r6, \"OPEN\"));\n    });\n    i0.ɵɵtext(12, \"Reopen\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(13, \"button\", 25);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_div_31_Template_button_click_13_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const job_r6 = restoredCtx.$implicit;\n      const ctx_r11 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r11.changeStatus(job_r6, \"FILLED\"));\n    });\n    i0.ɵɵtext(14, \"Fill\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"button\", 29);\n    i0.ɵɵlistener(\"click\", function EmployerPostingsComponent_div_31_Template_button_click_15_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const job_r6 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r12.remove(job_r6.id));\n    });\n    i0.ɵɵtext(16, \"Delete\");\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const job_r6 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate2(\"\", job_r6.title, \" (\", job_r6.status, \")\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate3(\"\", job_r6.companyName, \" | \", job_r6.location, \" | \", job_r6.jobType, \"\");\n  }\n}\nfunction EmployerPostingsComponent_p_32_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 30);\n    i0.ɵɵtext(1, \"No job postings yet.\");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let EmployerPostingsComponent = /*#__PURE__*/(() => {\n  class EmployerPostingsComponent {\n    constructor(fb, employerService) {\n      this.fb = fb;\n      this.employerService = employerService;\n      this.jobs = [];\n      this.message = '';\n      this.editingJobId = null;\n      this.form = this.fb.group({\n        companyName: ['', Validators.required],\n        title: ['', Validators.required],\n        description: ['', Validators.required],\n        skills: [''],\n        maxExperienceYears: [null, [Validators.required, Validators.min(0)]],\n        education: [''],\n        location: ['', Validators.required],\n        minSalary: [null, [Validators.required, Validators.min(1)]],\n        maxSalary: [null, [Validators.required, Validators.min(1)]],\n        jobType: ['', Validators.required],\n        applicationDeadline: [''],\n        openings: [null, [Validators.required, Validators.min(1)]]\n      });\n      this.loadJobs();\n    }\n    submit() {\n      if (this.form.invalid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      const payload = {\n        ...this.form.getRawValue(),\n        applicationDeadline: this.form.value.applicationDeadline || null\n      };\n      const request$ = this.editingJobId ? this.employerService.updateJob(this.editingJobId, payload) : this.employerService.createJob(payload);\n      request$.subscribe({\n        next: () => {\n          this.message = this.editingJobId ? 'Job updated successfully' : 'Job created successfully';\n          this.resetForm();\n          this.loadJobs();\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to save job';\n        }\n      });\n    }\n    edit(job) {\n      this.editingJobId = job.id;\n      this.form.patchValue({\n        companyName: job.companyName,\n        title: job.title,\n        description: job.description,\n        skills: job.skills ?? '',\n        maxExperienceYears: job.maxExperienceYears,\n        education: job.education ?? '',\n        location: job.location,\n        minSalary: Number(job.minSalary),\n        maxSalary: Number(job.maxSalary),\n        jobType: job.jobType,\n        applicationDeadline: job.applicationDeadline ?? '',\n        openings: job.openings\n      });\n    }\n    remove(jobId) {\n      this.employerService.deleteJob(jobId).subscribe({\n        next: () => {\n          this.message = 'Job deleted successfully';\n          this.loadJobs();\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to delete job';\n        }\n      });\n    }\n    changeStatus(job, status) {\n      const request$ = status === 'OPEN' ? this.employerService.reopenJob(job.id) : status === 'CLOSED' ? this.employerService.closeJob(job.id) : this.employerService.fillJob(job.id);\n      request$.subscribe({\n        next: () => this.loadJobs(),\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to change job status';\n        }\n      });\n    }\n    cancelEdit() {\n      this.resetForm();\n    }\n    loadJobs() {\n      this.employerService.getJobs().subscribe({\n        next: jobs => {\n          this.jobs = jobs;\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to load jobs';\n        }\n      });\n    }\n    resetForm() {\n      this.editingJobId = null;\n      this.form.reset({\n        companyName: '',\n        title: '',\n        description: '',\n        skills: '',\n        maxExperienceYears: null,\n        education: '',\n        location: '',\n        minSalary: null,\n        maxSalary: null,\n        jobType: '',\n        applicationDeadline: '',\n        openings: null\n      });\n    }\n    static {\n      this.ɵfac = function EmployerPostingsComponent_Factory(t) {\n        return new (t || EmployerPostingsComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.EmployerService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: EmployerPostingsComponent,\n        selectors: [[\"app-employer-postings\"]],\n        decls: 33,\n        vars: 6,\n        consts: [[1, \"panel\"], [1, \"search-grid\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"companyName\", \"placeholder\", \"Company name\"], [\"formControlName\", \"title\", \"placeholder\", \"Title\"], [\"formControlName\", \"description\", \"placeholder\", \"Description\"], [\"formControlName\", \"skills\", \"placeholder\", \"Skills (comma separated)\"], [\"formControlName\", \"maxExperienceYears\", \"type\", \"number\", \"placeholder\", \"Experience years\"], [\"formControlName\", \"education\", \"placeholder\", \"Education\"], [\"formControlName\", \"location\", \"placeholder\", \"Location\"], [\"formControlName\", \"minSalary\", \"type\", \"number\", \"placeholder\", \"Salary min\"], [\"formControlName\", \"maxSalary\", \"type\", \"number\", \"placeholder\", \"Salary max\"], [\"formControlName\", \"jobType\"], [\"value\", \"\", \"disabled\", \"\"], [\"value\", \"Full-time\"], [\"value\", \"Part-time\"], [\"value\", \"Contract\"], [\"value\", \"Internship\"], [\"formControlName\", \"applicationDeadline\", \"type\", \"date\"], [\"formControlName\", \"openings\", \"type\", \"number\", \"placeholder\", \"Openings\"], [\"type\", \"submit\", 1, \"action-btn\"], [\"type\", \"button\", \"class\", \"outline-btn\", 3, \"click\", 4, \"ngIf\"], [\"class\", \"feedback\", 4, \"ngIf\"], [1, \"job-list\"], [\"class\", \"job-card\", 4, \"ngFor\", \"ngForOf\"], [\"class\", \"empty\", 4, \"ngIf\"], [\"type\", \"button\", 1, \"outline-btn\", 3, \"click\"], [1, \"feedback\"], [1, \"job-card\"], [1, \"actions-row\"], [\"type\", \"button\", 1, \"outline-btn\", \"danger-btn\", 3, \"click\"], [1, \"empty\"]],\n        template: function EmployerPostingsComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Manage Job Postings\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function EmployerPostingsComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelement(4, \"input\", 2)(5, \"input\", 3)(6, \"textarea\", 4)(7, \"input\", 5)(8, \"input\", 6)(9, \"input\", 7)(10, \"input\", 8)(11, \"input\", 9)(12, \"input\", 10);\n            i0.ɵɵelementStart(13, \"select\", 11)(14, \"option\", 12);\n            i0.ɵɵtext(15, \"Select job type\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(16, \"option\", 13);\n            i0.ɵɵtext(17, \"Full-time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(18, \"option\", 14);\n            i0.ɵɵtext(19, \"Part-time\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"option\", 15);\n            i0.ɵɵtext(21, \"Contract\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"option\", 16);\n            i0.ɵɵtext(23, \"Internship\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(24, \"input\", 17)(25, \"input\", 18);\n            i0.ɵɵelementStart(26, \"button\", 19);\n            i0.ɵɵtext(27);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(28, EmployerPostingsComponent_button_28_Template, 2, 0, \"button\", 20);\n            i0.ɵɵelementEnd();\n            i0.ɵɵtemplate(29, EmployerPostingsComponent_p_29_Template, 2, 1, \"p\", 21);\n            i0.ɵɵelementStart(30, \"div\", 22);\n            i0.ɵɵtemplate(31, EmployerPostingsComponent_div_31_Template, 17, 5, \"div\", 23);\n            i0.ɵɵtemplate(32, EmployerPostingsComponent_p_32_Template, 2, 0, \"p\", 24);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(24);\n            i0.ɵɵtextInterpolate(ctx.editingJobId ? \"Update Job\" : \"Create Job\");\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.editingJobId);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.message);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"ngForOf\", ctx.jobs);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", !ctx.jobs.length);\n          }\n        },\n        dependencies: [i3.NgForOf, i3.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.NumberValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return EmployerPostingsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}