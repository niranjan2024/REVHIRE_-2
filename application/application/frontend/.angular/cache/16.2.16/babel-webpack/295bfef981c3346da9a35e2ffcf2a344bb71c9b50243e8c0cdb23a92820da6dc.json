{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/job-seeker.service\";\nexport let SeekerResumeComponent = /*#__PURE__*/(() => {\n  class SeekerResumeComponent {\n    constructor(fb, jobSeekerService) {\n      this.fb = fb;\n      this.jobSeekerService = jobSeekerService;\n      this.message = '';\n      this.fileMessage = '';\n      this.selectedFileName = 'No file chosen';\n      this.form = this.fb.group({\n        objective: ['', Validators.maxLength(500)],\n        education: ['', Validators.maxLength(2000)],\n        experience: ['', Validators.maxLength(2000)],\n        skills: ['', Validators.maxLength(2000)],\n        projects: ['', Validators.maxLength(2000)],\n        certifications: ['', Validators.maxLength(2000)]\n      });\n    }\n    ngOnInit() {\n      this.jobSeekerService.getResume().subscribe({\n        next: resume => {\n          this.form.patchValue({\n            objective: resume.objective ?? '',\n            education: resume.education ?? '',\n            experience: resume.experience ?? '',\n            skills: resume.skills ?? '',\n            projects: resume.projects ?? '',\n            certifications: resume.certifications ?? ''\n          });\n          if (resume.uploadedFileName) {\n            this.selectedFileName = `${resume.uploadedFileName} (${this.toMbLabel(resume.uploadedFileSize)})`;\n          }\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to load resume';\n        }\n      });\n    }\n    saveTextResume() {\n      if (this.form.invalid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      const raw = this.form.getRawValue();\n      this.jobSeekerService.updateResume({\n        objective: raw.objective ?? '',\n        education: raw.education ?? '',\n        experience: raw.experience ?? '',\n        skills: raw.skills ?? '',\n        projects: raw.projects ?? '',\n        certifications: raw.certifications ?? ''\n      }).subscribe({\n        next: () => {\n          this.message = 'Text resume saved successfully';\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Unable to save resume';\n        }\n      });\n    }\n    onFileSelected(event) {\n      const input = event.target;\n      const file = input.files && input.files.length ? input.files[0] : null;\n      if (!file) {\n        this.fileMessage = 'Please choose a file';\n        return;\n      }\n      const allowedTypes = new Set(['application/pdf', 'application/msword', 'application/vnd.openxmlformats-officedocument.wordprocessingml.document']);\n      const allowedExtensions = ['.pdf', '.doc', '.docx'];\n      const lowerName = file.name.toLowerCase();\n      const extensionAllowed = allowedExtensions.some(ext => lowerName.endsWith(ext));\n      if (!extensionAllowed || !allowedTypes.has(file.type)) {\n        this.fileMessage = 'Only pdf, doc, or docx files are allowed';\n        return;\n      }\n      if (file.size > 2 * 1024 * 1024) {\n        this.fileMessage = 'File size must be up to 2MB';\n        return;\n      }\n      this.jobSeekerService.uploadResumeFile(file).subscribe({\n        next: res => {\n          this.selectedFileName = `${res.fileName} (${this.toMbLabel(res.fileSize)})`;\n          this.fileMessage = res.message;\n        },\n        error: err => {\n          this.fileMessage = err?.error?.message ?? 'Resume upload failed';\n        }\n      });\n    }\n    toMbLabel(size) {\n      if (!size && size !== 0) {\n        return '';\n      }\n      return `${(size / (1024 * 1024)).toFixed(2)} MB`;\n    }\n    static {\n      this.ɵfac = function SeekerResumeComponent_Factory(t) {\n        return new (t || SeekerResumeComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.JobSeekerService));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: SeekerResumeComponent,\n        selectors: [[\"app-seeker-resume\"]],\n        decls: 34,\n        vars: 4,\n        consts: [[1, \"panel\", \"form-panel\"], [3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"objective\"], [\"formControlName\", \"education\"], [\"formControlName\", \"experience\"], [\"formControlName\", \"skills\"], [\"formControlName\", \"projects\"], [\"formControlName\", \"certifications\"], [\"type\", \"submit\", 1, \"action-btn\"], [1, \"feedback\"], [\"type\", \"file\", \"accept\", \".pdf,.doc,.docx\", 3, \"change\"], [1, \"file-name\"]],\n        template: function SeekerResumeComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"section\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Resume Builder\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function SeekerResumeComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.saveTextResume();\n            });\n            i0.ɵɵelementStart(4, \"label\");\n            i0.ɵɵtext(5, \"Objective\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(6, \"textarea\", 2);\n            i0.ɵɵelementStart(7, \"label\");\n            i0.ɵɵtext(8, \"Education (comma separated)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(9, \"input\", 3);\n            i0.ɵɵelementStart(10, \"label\");\n            i0.ɵɵtext(11, \"Experience (comma separated)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(12, \"input\", 4);\n            i0.ɵɵelementStart(13, \"label\");\n            i0.ɵɵtext(14, \"Skills\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(15, \"input\", 5);\n            i0.ɵɵelementStart(16, \"label\");\n            i0.ɵɵtext(17, \"Projects (comma separated)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(18, \"input\", 6);\n            i0.ɵɵelementStart(19, \"label\");\n            i0.ɵɵtext(20, \"Certifications (comma separated)\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(21, \"input\", 7);\n            i0.ɵɵelementStart(22, \"button\", 8);\n            i0.ɵɵtext(23, \"Save Text Resume\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"p\", 9);\n            i0.ɵɵtext(25);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelement(26, \"hr\");\n            i0.ɵɵelementStart(27, \"h2\");\n            i0.ɵɵtext(28, \"Upload Formatted Resume\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"input\", 10);\n            i0.ɵɵlistener(\"change\", function SeekerResumeComponent_Template_input_change_29_listener($event) {\n              return ctx.onFileSelected($event);\n            });\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(30, \"p\", 11);\n            i0.ɵɵtext(31);\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(32, \"p\", 9);\n            i0.ɵɵtext(33);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(22);\n            i0.ɵɵtextInterpolate(ctx.message);\n            i0.ɵɵadvance(6);\n            i0.ɵɵtextInterpolate(ctx.selectedFileName);\n            i0.ɵɵadvance(2);\n            i0.ɵɵtextInterpolate(ctx.fileMessage);\n          }\n        },\n        dependencies: [i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return SeekerResumeComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}