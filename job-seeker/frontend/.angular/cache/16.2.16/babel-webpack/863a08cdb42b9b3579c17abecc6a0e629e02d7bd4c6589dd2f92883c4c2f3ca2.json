{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction RegisterComponent_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1, \" Password must include upper/lower case, number, and special character. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_ng_container_36_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelement(1, \"input\", 26)(2, \"input\", 27)(3, \"input\", 28)(4, \"textarea\", 29)(5, \"input\", 30)(6, \"input\", 31);\n    i0.ɵɵelementContainerEnd();\n  }\n}\nfunction RegisterComponent_ng_template_37_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"input\", 32);\n    i0.ɵɵelementStart(1, \"select\", 33)(2, \"option\", 12);\n    i0.ɵɵtext(3, \"Employment Status\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"option\", 34);\n    i0.ɵɵtext(5, \"Fresher\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"option\", 35);\n    i0.ɵɵtext(7, \"Experience\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction RegisterComponent_div_39_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1, \" Password and confirm password do not match. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction RegisterComponent_div_40_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 25);\n    i0.ɵɵtext(1, \" Mobile number must be 10-15 digits. \");\n    i0.ɵɵelementEnd();\n  }\n}\nexport let RegisterComponent = /*#__PURE__*/(() => {\n  class RegisterComponent {\n    constructor(fb, authService, router) {\n      this.fb = fb;\n      this.authService = authService;\n      this.router = router;\n      this.message = '';\n      this.showPassword = false;\n      this.showConfirmPassword = false;\n      this.employerRole = 'EMPLOYER';\n      this.passwordRegex = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\\d)(?=.*[@$!%*?&#^()_+\\-=]).{8,64}$/;\n      this.form = this.fb.group({\n        username: ['', [Validators.required, Validators.minLength(4)]],\n        fullName: ['', [Validators.required, Validators.minLength(3)]],\n        email: ['', [Validators.required, Validators.email]],\n        mobileNumber: ['', [Validators.required, Validators.pattern(/^[0-9]{10,15}$/)]],\n        password: ['', [Validators.required, Validators.pattern(this.passwordRegex)]],\n        confirmPassword: ['', [Validators.required]],\n        securityQuestion: ['', [Validators.required]],\n        securityAnswer: ['', [Validators.required, Validators.minLength(2)]],\n        location: ['', [Validators.required, Validators.minLength(2)]],\n        employmentStatus: ['', Validators.required],\n        role: ['', Validators.required],\n        companyName: [''],\n        industry: [''],\n        companySize: [''],\n        companyDescription: [''],\n        website: [''],\n        companyLocation: ['']\n      });\n      this.form.controls.role.valueChanges.subscribe(() => this.applyRoleValidators());\n    }\n    get isEmployer() {\n      return this.form.controls.role.value === this.employerRole;\n    }\n    submit() {\n      this.applyRoleValidators();\n      if (this.form.invalid) {\n        this.form.markAllAsTouched();\n        return;\n      }\n      if (this.form.value.password !== this.form.value.confirmPassword) {\n        this.message = 'Password and confirm password do not match';\n        return;\n      }\n      const formValue = this.form.getRawValue();\n      const request = {\n        username: formValue.username ?? '',\n        fullName: formValue.fullName ?? '',\n        email: formValue.email ?? '',\n        password: formValue.password ?? '',\n        confirmPassword: formValue.confirmPassword ?? '',\n        mobileNumber: formValue.mobileNumber ?? '',\n        role: formValue.role ?? 'JOB_SEEKER',\n        securityQuestion: formValue.securityQuestion ?? '',\n        securityAnswer: formValue.securityAnswer ?? '',\n        location: this.isEmployer ? formValue.companyLocation ?? '' : formValue.location ?? '',\n        employmentStatus: this.isEmployer ? 'EXPERIENCE' : formValue.employmentStatus ?? 'FRESHER',\n        companyName: this.isEmployer ? formValue.companyName ?? '' : undefined,\n        industry: this.isEmployer ? formValue.industry ?? '' : undefined,\n        companySize: this.isEmployer ? formValue.companySize ?? '' : undefined,\n        companyDescription: this.isEmployer ? formValue.companyDescription ?? '' : undefined,\n        website: this.isEmployer ? formValue.website ?? '' : undefined,\n        companyLocation: this.isEmployer ? formValue.companyLocation ?? '' : undefined\n      };\n      this.authService.register(request).subscribe({\n        next: res => {\n          this.message = res?.message ?? 'Registration successful';\n          if (this.redirectTimer) {\n            clearTimeout(this.redirectTimer);\n          }\n          this.redirectTimer = setTimeout(() => {\n            this.router.navigate(['/login']);\n          }, 2000);\n        },\n        error: err => {\n          this.message = err?.error?.message ?? 'Registration failed';\n        }\n      });\n    }\n    togglePassword() {\n      this.showPassword = !this.showPassword;\n    }\n    toggleConfirmPassword() {\n      this.showConfirmPassword = !this.showConfirmPassword;\n    }\n    applyRoleValidators() {\n      this.setControlValidators('location', this.isEmployer ? [] : [Validators.required, Validators.minLength(2)]);\n      this.setControlValidators('employmentStatus', this.isEmployer ? [] : [Validators.required]);\n      const employerValidators = this.isEmployer ? [Validators.required, Validators.minLength(2)] : [];\n      this.setControlValidators('companyName', employerValidators);\n      this.setControlValidators('industry', employerValidators);\n      this.setControlValidators('companySize', employerValidators);\n      this.setControlValidators('companyDescription', employerValidators);\n      this.setControlValidators('companyLocation', employerValidators);\n      this.setControlValidators('website', this.isEmployer ? [Validators.required] : []);\n      this.form.updateValueAndValidity({\n        emitEvent: false\n      });\n    }\n    setControlValidators(controlName, validators) {\n      const control = this.form.controls[controlName];\n      control.setValidators(validators);\n      control.updateValueAndValidity({\n        emitEvent: false\n      });\n    }\n    static {\n      this.ɵfac = function RegisterComponent_Factory(t) {\n        return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n      };\n    }\n    static {\n      this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n        type: RegisterComponent,\n        selectors: [[\"app-register\"]],\n        decls: 45,\n        vars: 9,\n        consts: [[1, \"auth-form\"], [3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"username\", \"placeholder\", \"Username\"], [\"formControlName\", \"fullName\", \"placeholder\", \"Full Name\"], [\"formControlName\", \"email\", \"placeholder\", \"Email Address\"], [\"formControlName\", \"mobileNumber\", \"placeholder\", \"Mobile Number\"], [1, \"field-with-button\"], [\"formControlName\", \"password\", \"placeholder\", \"Password\", 3, \"type\"], [\"type\", \"button\", 1, \"mini-btn\", 3, \"click\"], [\"class\", \"error\", 4, \"ngIf\"], [\"formControlName\", \"confirmPassword\", \"placeholder\", \"Confirm Password\", 3, \"type\"], [\"formControlName\", \"role\"], [\"value\", \"\", \"disabled\", \"\"], [\"value\", \"JOB_SEEKER\"], [\"value\", \"EMPLOYER\"], [\"formControlName\", \"securityQuestion\"], [\"value\", \"What is your first school name?\"], [\"value\", \"What is your mother's maiden name?\"], [\"value\", \"What city were you born in?\"], [\"value\", \"What is your favorite movie?\"], [\"formControlName\", \"securityAnswer\", \"placeholder\", \"Security Answer\"], [4, \"ngIf\", \"ngIfElse\"], [\"jobSeekerFields\", \"\"], [\"type\", \"submit\", 1, \"primary-btn\"], [1, \"feedback\"], [1, \"error\"], [\"formControlName\", \"companyName\", \"placeholder\", \"Company Name\"], [\"formControlName\", \"industry\", \"placeholder\", \"Industry\"], [\"formControlName\", \"companySize\", \"placeholder\", \"Company Size\"], [\"formControlName\", \"companyDescription\", \"placeholder\", \"Company Description\", \"rows\", \"3\"], [\"formControlName\", \"website\", \"placeholder\", \"Website\"], [\"formControlName\", \"companyLocation\", \"placeholder\", \"Company Location\"], [\"formControlName\", \"location\", \"placeholder\", \"Location\"], [\"formControlName\", \"employmentStatus\"], [\"value\", \"FRESHER\"], [\"value\", \"EXPERIENCE\"]],\n        template: function RegisterComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\");\n            i0.ɵɵtext(2, \"Create Account\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(3, \"form\", 1);\n            i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_3_listener() {\n              return ctx.submit();\n            });\n            i0.ɵɵelement(4, \"input\", 2)(5, \"input\", 3)(6, \"input\", 4)(7, \"input\", 5);\n            i0.ɵɵelementStart(8, \"div\", 6);\n            i0.ɵɵelement(9, \"input\", 7);\n            i0.ɵɵelementStart(10, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_10_listener() {\n              return ctx.togglePassword();\n            });\n            i0.ɵɵtext(11, \"Show\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵtemplate(12, RegisterComponent_div_12_Template, 2, 0, \"div\", 9);\n            i0.ɵɵelementStart(13, \"div\", 6);\n            i0.ɵɵelement(14, \"input\", 10);\n            i0.ɵɵelementStart(15, \"button\", 8);\n            i0.ɵɵlistener(\"click\", function RegisterComponent_Template_button_click_15_listener() {\n              return ctx.toggleConfirmPassword();\n            });\n            i0.ɵɵtext(16, \"Show\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(17, \"select\", 11)(18, \"option\", 12);\n            i0.ɵɵtext(19, \"Choose your role\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(20, \"option\", 13);\n            i0.ɵɵtext(21, \"Job Seeker\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(22, \"option\", 14);\n            i0.ɵɵtext(23, \"Employer\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(24, \"select\", 15)(25, \"option\", 12);\n            i0.ɵɵtext(26, \"Choose security question\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(27, \"option\", 16);\n            i0.ɵɵtext(28, \"What is your first school name?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(29, \"option\", 17);\n            i0.ɵɵtext(30, \"What is your mother's maiden name?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(31, \"option\", 18);\n            i0.ɵɵtext(32, \"What city were you born in?\");\n            i0.ɵɵelementEnd();\n            i0.ɵɵelementStart(33, \"option\", 19);\n            i0.ɵɵtext(34, \"What is your favorite movie?\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelement(35, \"input\", 20);\n            i0.ɵɵtemplate(36, RegisterComponent_ng_container_36_Template, 7, 0, \"ng-container\", 21);\n            i0.ɵɵtemplate(37, RegisterComponent_ng_template_37_Template, 8, 0, \"ng-template\", null, 22, i0.ɵɵtemplateRefExtractor);\n            i0.ɵɵtemplate(39, RegisterComponent_div_39_Template, 2, 0, \"div\", 9);\n            i0.ɵɵtemplate(40, RegisterComponent_div_40_Template, 2, 0, \"div\", 9);\n            i0.ɵɵelementStart(41, \"button\", 23);\n            i0.ɵɵtext(42, \"Sign up\");\n            i0.ɵɵelementEnd()();\n            i0.ɵɵelementStart(43, \"p\", 24);\n            i0.ɵɵtext(44);\n            i0.ɵɵelementEnd()();\n          }\n          if (rf & 2) {\n            const _r2 = i0.ɵɵreference(38);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"formGroup\", ctx.form);\n            i0.ɵɵadvance(6);\n            i0.ɵɵproperty(\"type\", ctx.showPassword ? \"text\" : \"password\");\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.controls.password.invalid && ctx.form.controls.password.touched);\n            i0.ɵɵadvance(2);\n            i0.ɵɵproperty(\"type\", ctx.showConfirmPassword ? \"text\" : \"password\");\n            i0.ɵɵadvance(22);\n            i0.ɵɵproperty(\"ngIf\", ctx.isEmployer)(\"ngIfElse\", _r2);\n            i0.ɵɵadvance(3);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.controls.confirmPassword.touched && ctx.form.value.password !== ctx.form.value.confirmPassword);\n            i0.ɵɵadvance(1);\n            i0.ɵɵproperty(\"ngIf\", ctx.form.controls.mobileNumber.invalid && ctx.form.controls.mobileNumber.touched);\n            i0.ɵɵadvance(4);\n            i0.ɵɵtextInterpolate(ctx.message);\n          }\n        },\n        dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.NgSelectOption, i1.ɵNgSelectMultipleOption, i1.DefaultValueAccessor, i1.SelectControlValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n        encapsulation: 2\n      });\n    }\n  }\n  return RegisterComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}